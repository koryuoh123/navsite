{"version":3,"sources":["main.js"],"names":["$siteList","$","$lastLi","find","x","localStorage","getItem","xObject","JSON","parse","event","window","hashMap","logo","logoType","url","name","id","render","remove","forEach","node","index","simplifyUrl","ico","$li","insertBefore","on","open","e","stopPropagation","value","favDialog","showModal","splice","close","current","filter","t","currenturl","console","log","indexOf","undefined","prompt","newSite","push","onbeforeunload","string","stringify","setItem","replace"],"mappings":"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","file":"main.1f19ae8e.js","sourceRoot":"..\\src","sourcesContent":["const $siteList = $(\".siteList\");\r\nconst $lastLi = $siteList.find(\"li.last\"); //找出<li class=\"last\">\r\nconst x = localStorage.getItem(\"x\");\r\nconst xObject = JSON.parse(x);\r\nlet event;\r\nwindow.hashMap = xObject || [\r\n  {\r\n    logo: \"W\",\r\n    logoType: \"image\",\r\n    url: \"https://www.w3.org/\",\r\n    name: \"W3C\",\r\n    id: 1,\r\n  },\r\n  {\r\n    logo: \"W\",\r\n    logoType: \"image\",\r\n    url: \"https://www.baidu.com/\",\r\n    name: \"百度\",\r\n    id: 2,\r\n  },\r\n\r\n  {\r\n    logo: \"W\",\r\n    logoType: \"image\",\r\n    url: \"https://www.bilibili.com/\",\r\n    name: \"哔哩哔哩\",\r\n    id: 3,\r\n  },\r\n];\r\n\r\n/*渲染hashmap*/\r\nconst render = () => {\r\n  $(\".siteList\").find(\"li:not(.last)\").remove();\r\n  hashMap.forEach((node, index) => {\r\n    node.id = index;\r\n    const $siteList = $(\".siteList\");\r\n    const $lastLi = $siteList.find(\"li.last\"); //找出<li class=\"last\">\r\n\r\n    if (!node.name) {\r\n      node.name = simplifyUrl(node.url);\r\n    }\r\n\r\n    if (node.logoType === \"image\") {\r\n      const ico = node.url + \"/favicon.ico\";\r\n      const $li = $(`<li>\r\n                <div class=\"site\">\r\n                <div class=\"edit\">\r\n                  <svg class=\"icon\" aria-hidden=\"true\">\r\n                    <use xlink:href=\"#icon-choose2\"></use>\r\n                  </svg>\r\n                  </div>\r\n                    <div class=\"logo\">\r\n                    <img class =\"image\" src= ${ico} alt=\"\" />\r\n                    </div>\r\n                    <div class=\"link\">${node.name}</div>\r\n                </div> \r\n            </li>`).insertBefore($lastLi);\r\n      /*跳转功能 */\r\n      $li.on(\"click\", () => {\r\n        window.open(node.url);\r\n      });\r\n\r\n      /*删除功能*/\r\n      // hashMap.splice(index, 1);\r\n      // render();\r\n\r\n      /*点击点点点时 */\r\n      $li.on(\"click\", \".edit\", (e) => {\r\n        e.stopPropagation();\r\n        event = node;\r\n        $(\"#name\")[0].value = event.name;\r\n        $(\"#url\")[0].value = event.url;\r\n        favDialog.showModal();\r\n      });\r\n    }\r\n\r\n    /* ↓↓备用方案↓↓*/\r\n    if (node.logoType === \"text\") {\r\n      const $li = $(`<li>\r\n                  <div class=\"site\">\r\n                  <div class=\"edit\">\r\n                  <svg class=\"icon\" aria-hidden=\"true\">\r\n                    <use xlink:href=\"#icon-choose2\"></use>\r\n                  </svg>\r\n                  </div>\r\n                      <div class=\"logo\">${simplifyUrl(\r\n                        simplifyUrl(node.url)[0]\r\n                      )}</div>\r\n                      <div class=\"link\">${simplifyUrl(node.url)}</div>\r\n                  </div> \r\n              </li>`).insertBefore($lastLi);\r\n      /*跳转功能 */\r\n      $li.on(\"click\", () => {\r\n        window.open(node.url);\r\n      });\r\n      /*删除功能*/\r\n      $li.on(\"click\", \".close\", (e) => {\r\n        e.stopPropagation();\r\n        hashMap.splice(index, 1);\r\n        render();\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\n/*点击删除按钮时 */\r\n$(\"#remove\").on(\"click\", () => {\r\n  hashMap.splice(event.id, 1);\r\n  favDialog.close();\r\n  render();\r\n});\r\n/*点击确定按钮时 */\r\n$(\"#confirm\").on(\"click\", (e) => {\r\n  let current = hashMap.filter((t) => t.id === event.id)[0];\r\n  let currenturl = $(\"#url\")[0].value;\r\n  console.log(current);\r\n  current.name = $(\"#name\")[0].value;\r\n\r\n  if (currenturl.indexOf(\"http\") !== 0) {\r\n    //为0说明有http\r\n    currenturl = \"http://\" + currenturl;\r\n  }\r\n\r\n  current.url = currenturl;\r\n  favDialog.close();\r\n  render();\r\n});\r\n$(\"#cancel\").on(\"click\", () => {\r\n  favDialog.close();\r\n  event = undefined;\r\n});\r\n\r\n/*添加功能 */\r\n$(\".addButton\").on(\"click\", () => {\r\n  let url = window.prompt(\"输入要添加的网址 比如：www.baidu.com\");\r\n  if (url) {\r\n    if (url.indexOf(\"http\") !== 0) {\r\n      //为0说明有http\r\n      url = \"http://\" + url;\r\n    }\r\n    const newSite = { logo: url[0], logoType: \"image\", url: url };\r\n    hashMap.push(newSite);\r\n    render();\r\n  }\r\n});\r\n\r\n/*如果页面被关闭了，就将数据保存到 localStorage 里*/\r\nwindow.onbeforeunload = () => {\r\n  const string = JSON.stringify(hashMap);\r\n  localStorage.setItem(\"x\", string); //key,value\r\n};\r\n\r\n/*简化link */\r\nconst simplifyUrl = (url) => {\r\n  return url\r\n    .replace(\"https://\", \"\")\r\n    .replace(\"http://\", \"\")\r\n    .replace(\"www.\", \"\")\r\n    .replace(/\\/,*/, \"\"); //正则表达式，删除 / 开头的内容\r\n};\r\n\r\n/*main */\r\nrender();\r\n"]}